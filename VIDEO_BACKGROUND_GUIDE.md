# 首页英雄区域视频背景实现指南

**创建时间**: 2025-10-30  
**目标**: 在首页英雄区域添加循环播放的视频背景（带声音）

---

## 📁 视频文件存放位置

### 方式一：本地存储（推荐用于开发测试）

```
项目路径：
frontend/
  └── videos/
      └── hero-background.mp4  ← 你的视频文件
```

**文件命名**: `hero-background.mp4`

**优点**：
- 简单直接
- 不需要额外配置
- 加载速度快（本地）

**缺点**：
- 文件大小受限
- 影响页面加载速度

---

### 方式二：Cloudflare R2 存储（推荐用于生产环境）

```
上传路径：
Cloudflare R2 Bucket (poap-images)
  └── videos/
      └── hero-background.mp4  ← 上传到这里
```

**访问 URL**：
```
https://songbrocade-api.petterbrand03.workers.dev/storage/public/videos/hero-background.mp4
```

**优点**：
- 不影响代码仓库大小
- CDN 加速
- 可以随时更换视频
- 支持大文件

**缺点**：
- 需要先上传
- 依赖网络

---

## 🎬 视频文件要求

### 推荐规格

```
格式: MP4 (H.264 编码)
分辨率: 1920x1080 (Full HD)
比例: 16:9
帧率: 30 fps
码率: 2-5 Mbps
文件大小: < 10 MB（建议）
时长: 10-30 秒（循环播放）
音频: AAC 编码, 128 kbps
```

### 优化建议

1. **压缩视频**：
   - 使用 HandBrake 或 FFmpeg 压缩
   - 保持质量和文件大小平衡

2. **循环友好**：
   - 视频首尾要衔接流畅
   - 避免突兀的转场

3. **移动端优化**：
   - 提供较小的移动端版本
   - 或在移动端禁用视频

---

## 🎨 设计建议

### 视频内容

建议包含以下元素：
- 非遗手工艺场景（刺绣、编织、陶艺等）
- 慢动作特写
- 暗色调（配合深色主题）
- 细节镜头（手部动作、材质纹理）

### 色调

- 整体偏暗（不影响白色文字可读性）
- 暖色调（金色、红褐色）
- 适当的对比度

---

## 💻 代码实现

我将实现以下功能：
1. 视频作为背景全屏播放
2. 自动循环、静音可选
3. 响应式设计（移动端友好）
4. 渐变遮罩（确保文字可读）
5. 声音控制按钮（用户可开启/关闭）
6. 加载动画（视频加载时显示）

---

## 📱 移动端策略

由于移动端视频自动播放有限制，我会实现：

1. **小屏幕（< 768px）**：
   - 显示静态海报图
   - 或使用 GIF/WebP 动画
   - 不播放视频（节省流量）

2. **中大屏幕（≥ 768px）**：
   - 完整视频背景
   - 自动播放

---

## 🎵 声音策略

### 默认行为

- 视频初始状态：**静音**
- 用户可点击按钮开启声音
- 符合 Web 最佳实践（避免突然的声音）

### 控制按钮

- 位置：右下角
- 图标：🔇 (静音) / 🔊 (有声)
- 平滑淡入淡出

---

## ⚡ 性能优化

1. **预加载**：
   ```html
   <link rel="preload" href="videos/hero-background.mp4" as="video">
   ```

2. **懒加载**：
   - 首屏优先加载
   - 其他内容延迟

3. **格式兼容**：
   ```html
   <source src="video.webm" type="video/webm">
   <source src="video.mp4" type="video/mp4">
   ```

4. **回退方案**：
   - 如果视频加载失败，显示静态背景
   - 保持用户体验

---

## 🚀 实施步骤

### 步骤 1: 准备视频文件

1. 准备你的视频文件
2. 命名为 `hero-background.mp4`
3. 确保符合上述规格要求

### 步骤 2: 上传文件

**本地开发**：
```bash
mkdir -p frontend/videos
# 将视频文件放到这个目录
```

**生产环境（R2）**：
1. 登录 Cloudflare Dashboard
2. 进入 R2 Buckets
3. 找到 `poap-images` bucket
4. 创建 `videos` 文件夹
5. 上传 `hero-background.mp4`

### 步骤 3: 修改代码

我将修改 `frontend/index.html`，添加：
- 视频背景元素
- 声音控制按钮
- 响应式样式
- JavaScript 控制逻辑

### 步骤 4: 测试

- 本地测试
- 移动端测试
- 不同浏览器测试

### 步骤 5: 部署

- 部署到 Cloudflare Pages
- 验证线上效果

---

## 📋 代码清单

将修改以下部分：

1. **HTML 结构**：
   - 添加 `<video>` 元素
   - 添加声音控制按钮
   - 添加加载动画

2. **CSS 样式**：
   - 视频全屏样式
   - 遮罩渐变
   - 按钮样式
   - 响应式媒体查询

3. **JavaScript**：
   - 视频播放控制
   - 声音开关
   - 错误处理

---

## 🎯 最终效果

```
┌────────────────────────────────────────┐
│                                        │
│   [视频背景 - 循环播放]                │
│                                        │
│   ┌──────────────────────────┐       │
│   │    [渐变遮罩]              │       │
│   │                           │       │
│   │   手艺在链上               │       │
│   │   传承在未来               │       │
│   │                           │       │
│   │   [探索匠人世界] [加入...]  │       │
│   └──────────────────────────┘       │
│                                        │
│                    🔊 [声音控制]       │
└────────────────────────────────────────┘
```

---

准备好后，请告诉我：
1. 你选择哪种存储方式？（本地 or R2）
2. 你的视频文件准备好了吗？

我就开始编码实现！🚀

