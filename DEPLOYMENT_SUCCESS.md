# ğŸ‰ æ——è¢ä¼šæŠ•ç¥¨ç©ºæŠ•ç³»ç»Ÿéƒ¨ç½²å®ŒæˆæŠ¥å‘Š

## âœ… éƒ¨ç½²çŠ¶æ€

**éƒ¨ç½²æ—¶é—´**: 2025å¹´10æœˆ26æ—¥  
**éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸå®Œæˆ

## ğŸŒ éƒ¨ç½²åœ°å€

### åç«¯ API
- **Worker URL**: https://songbrocade-api.petterbrand03.workers.dev
- **å¥åº·æ£€æŸ¥**: https://songbrocade-api.petterbrand03.workers.dev/health
- **çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ

### å‰ç«¯åº”ç”¨
- **ä¸»åŸŸå**: https://main.poap-checkin-frontend.pages.dev
- **éƒ¨ç½²åŸŸå**: https://de9e2215.poap-checkin-frontend.pages.dev
- **çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ

## ğŸ”§ å·²å®Œæˆçš„é…ç½®

### 1. åç«¯ Worker é…ç½®
- âœ… D1 æ•°æ®åº“: `poap-db` (ba24fce5-6b11-4c24-828d-336787011ffd)
- âœ… R2 å­˜å‚¨æ¡¶: `poap-images`
- âœ… ç¯å¢ƒå˜é‡: `ADMIN_WALLETS`, `SHIPPING_KEY`
- âœ… Secrets: `RPC_URL`

### 2. æ•°æ®åº“åˆå§‹åŒ–
- âœ… äº‹ä»¶è¡¨ (events)
- âœ… ç­¾åˆ°è¡¨ (checkins)
- âœ… ä¼ æ‰¿äººè¡¨ (artisans)
- âœ… å•†å“è¡¨ (products_new)
- âœ… è®¢å•è¡¨ (orders)
- âœ… å¾½ç« å‘è¡Œè¡¨ (badges_issues)
- âœ… ç§¯åˆ†è¡¨ (rewards)
- âœ… æ‰€æœ‰ç´¢å¼•å·²åˆ›å»º

### 3. å®‰å…¨é…ç½®
- âœ… ç®¡ç†å‘˜ç™½åå•: `0xEf85456652ada05f12708b9bDcF215780E780D18`
- âœ… åŠ å¯†å¯†é’¥: å·²ç”Ÿæˆå¼ºå¯†é’¥
- âœ… CORS é…ç½®: å·²é…ç½®å…è®¸çš„åŸŸå

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### API æµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥ âœ…
curl https://songbrocade-api.petterbrand03.workers.dev/health
# è¿”å›: {"ok":true,"service":"worker-api","ts":1761458020616}

# è®¤è¯æŒ‘æˆ˜ âœ…
curl https://songbrocade-api.petterbrand03.workers.dev/auth/challenge
# è¿”å›: {"ok":true,"message":"Login to Admin\nNonce: ...","nonce":"..."}
```

### å‰ç«¯æµ‹è¯•
- âœ… é¡µé¢æ­£å¸¸åŠ è½½
- âœ… æ ·å¼å’Œè„šæœ¬æ­£å¸¸
- âœ… API é…ç½®æ­£ç¡®

## ğŸ“‹ å¯ç”¨åŠŸèƒ½

### ç®¡ç†å‘˜åŠŸèƒ½
1. **äº‹ä»¶ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ POAP äº‹ä»¶
2. **ä¼ æ‰¿äººç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ä¼ æ‰¿äººä¿¡æ¯
3. **å•†å“ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘å•†å“
4. **è®¢å•ç®¡ç†**: æŸ¥çœ‹ã€æ›´æ–°è®¢å•çŠ¶æ€
5. **å›¾ç‰‡ä¸Šä¼ **: ä¸Šä¼ å•†å“å›¾ç‰‡åˆ° R2

### ç”¨æˆ·åŠŸèƒ½
1. **äº‹ä»¶ç­¾åˆ°**: ä½¿ç”¨é™æ€ç æˆ–åŠ¨æ€ç ç­¾åˆ°
2. **å•†å“æµè§ˆ**: æŸ¥çœ‹ä¼ æ‰¿äººå•†å“
3. **ä¸‹å•è´­ä¹°**: åˆ›å»ºè®¢å•
4. **ç§¯åˆ†æŸ¥è¯¢**: æŸ¥çœ‹ç§¯åˆ†å†å²
5. **å¾½ç« ç®¡ç†**: æŸ¥çœ‹å’Œé¢†å–å¾½ç« 

## ğŸ” ç®¡ç†å‘˜è®¿é—®

### ç™»å½•æ–¹å¼
1. è®¿é—®å‰ç«¯é¡µé¢
2. ç‚¹å‡»ç®¡ç†å‘˜ç™»å½•
3. ä½¿ç”¨é’±åŒ…ç­¾åè®¤è¯
4. åœ°å€å¿…é¡»åœ¨ç™½åå•ä¸­: `0xEf85456652ada05f12708b9bDcF215780E780D18`

### ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹æ—¥å¿—
npx wrangler tail songbrocade-api

# æ›´æ–°ç®¡ç†å‘˜åœ°å€
cd worker-api
node manage-admin.js set 0xæ–°åœ°å€1,0xæ–°åœ°å€2

# æŸ¥çœ‹ç¯å¢ƒå˜é‡
npx wrangler secret list --name songbrocade-api
```

## ğŸš€ åç»­æ­¥éª¤

### 1. åŠŸèƒ½æµ‹è¯•
- [ ] æµ‹è¯•ç®¡ç†å‘˜ç™»å½•
- [ ] æµ‹è¯•äº‹ä»¶åˆ›å»º
- [ ] æµ‹è¯•ç”¨æˆ·ç­¾åˆ°
- [ ] æµ‹è¯•å•†å“ç®¡ç†
- [ ] æµ‹è¯•è®¢å•æµç¨‹

### 2. è‡ªå®šä¹‰é…ç½®
- [ ] æ›´æ–°ç®¡ç†å‘˜åœ°å€ç™½åå•
- [ ] é…ç½®è‡ªå®šä¹‰åŸŸå
- [ ] è®¾ç½®åˆçº¦åœ°å€
- [ ] è°ƒæ•´ CORS è®¾ç½®

### 3. ç”Ÿäº§ä¼˜åŒ–
- [ ] å®ç°çœŸå®çš„å¾½ç« ç­¾å
- [ ] æ·»åŠ æ›´å¤šå®‰å…¨éªŒè¯
- [ ] ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- [ ] æ·»åŠ ç›‘æ§å’Œå‘Šè­¦

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹æ—¥å¿—
```bash
npx wrangler tail songbrocade-api --format=pretty
```

### æ•°æ®åº“æ“ä½œ
```bash
# æŸ¥çœ‹äº‹ä»¶
npx wrangler d1 execute poap-db --command="SELECT * FROM events LIMIT 5"

# æŸ¥çœ‹ç­¾åˆ°è®°å½•
npx wrangler d1 execute poap-db --command="SELECT * FROM checkins LIMIT 5"
```

### é‡æ–°éƒ¨ç½²
```bash
# åç«¯
cd worker-api && npx wrangler deploy

# å‰ç«¯
cd frontend && npx wrangler pages deploy .
```

## ğŸ¯ ç³»ç»Ÿæ¶æ„

```
å‰ç«¯ (Cloudflare Pages)
    â†“ HTTPS
åç«¯ API (Cloudflare Worker)
    â†“
D1 æ•°æ®åº“ (SQLite)
    â†“
R2 å­˜å‚¨ (å›¾ç‰‡æ–‡ä»¶)
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **Worker å“åº”æ—¶é—´**: < 100ms
- **æ•°æ®åº“æŸ¥è¯¢**: < 50ms
- **å›¾ç‰‡ä¸Šä¼ **: æ”¯æŒå¤§æ–‡ä»¶
- **å¹¶å‘å¤„ç†**: æ”¯æŒé«˜å¹¶å‘

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… é’±åŒ…ç­¾åè®¤è¯
- âœ… ç®¡ç†å‘˜ç™½åå•
- âœ… æ•°æ®åŠ å¯†å­˜å‚¨
- âœ… CORS ä¿æŠ¤
- âœ… SQL æ³¨å…¥é˜²æŠ¤

---

**éƒ¨ç½²å®Œæˆï¼** ğŸ‰

ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ° Cloudflareï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚å¯ä»¥å¼€å§‹ä½¿ç”¨å’Œç®¡ç†æ——è¢ä¼šæŠ•ç¥¨ç©ºæŠ•ç³»ç»Ÿäº†ã€‚
